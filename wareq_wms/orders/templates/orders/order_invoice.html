{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'orders/orders.css' %}">
{% endblock %}

{% block content %}
<div class="page-invoice">
    <div class="container my-5">
        <div class="card shadow-lg border-0">
            <div class="card-body p-5">
                <!-- Header -->
                <div class="d-flex flex-column flex-md-row justify-content-between align-items-start mb-4">
                    <h2 class="fw-bold text-danger">
                        <i class="bi bi-receipt"></i> Invoice #{{ order.id }}
                    </h2>
                    <span class="badge 
                        {% if order.status == 'COMPLETED' %} bg-success
                        {% elif order.status == 'PENDING' %} bg-warning text-dark
                        {% elif order.status == 'CANCELLED' %} bg-danger
                        {% else %} bg-secondary {% endif %}
                        fs-6 px-3 py-2">
                        {{ order.status }}
                    </span>
                </div>

                <!-- Items -->
                <div class="table-responsive">
                    <table class="table table-dark table-bordered align-middle">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th class="text-center">Qty</th>
                                <th class="text-end">Price</th>
                                <th class="text-end">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in order.items.all %}
                            <tr>
                                <td>{{ i.item.name }}</td>
                                <td class="text-center">{{ i.quantity }}</td>
                                <td class="text-end">${{ i.price }}</td>
                                <td class="text-end">${{ i.total_price }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center text-muted">No items found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Totals -->
                <div class="d-flex justify-content-end mt-4">
                    <div class="p-3 grand-total-box text-end">
                        <h5 class="fw-bold mb-1">Grand Total</h5>
                        <h3 class="fw-bold text-danger">${{ order.total_amount }}</h3>
                    </div>
                </div>

                <!-- Footer -->
                <div class="mt-5 text-center text-muted small">
                    <p>Thank you for your business.</p>
                    <a href="?format=pdf" class="btn btn-outline-danger btn-sm px-3">
                        <i class="bi bi-download"></i> Download PDF
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}